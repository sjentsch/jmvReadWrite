<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Combines pairs of columns from a raw data matrix in .omv-files for the statistical spreadsheet 'jamovi' (https://www.jamovi.org) — combine_cols_omv • jmvReadWrite</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Combines pairs of columns from a raw data matrix in .omv-files for the statistical spreadsheet 'jamovi' (https://www.jamovi.org) — combine_cols_omv"><meta name="description" content="Combines pairs of columns from a raw data matrix in .omv-files for the statistical spreadsheet
'jamovi' (https://www.jamovi.org)"><meta property="og:description" content="Combines pairs of columns from a raw data matrix in .omv-files for the statistical spreadsheet
'jamovi' (https://www.jamovi.org)"><meta property="og:image" content="https://sjentsch.github.io/jmvReadWrite/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">jmvReadWrite</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.11</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/jmvReadWrite.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sjentsch/jmvReadWrite/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Combines pairs of columns from a raw data matrix in .omv-files for the statistical spreadsheet 'jamovi' (<a href="https://www.jamovi.org" class="external-link">https://www.jamovi.org</a>)</h1>
      <small class="dont-index">Source: <a href="https://github.com/sjentsch/jmvReadWrite/blob/main/R/combine_cols_omv.R" class="external-link"><code>R/combine_cols_omv.R</code></a></small>
      <div class="d-none name"><code>combine_cols_omv.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Combines pairs of columns from a raw data matrix in .omv-files for the statistical spreadsheet
'jamovi' (<a href="https://www.jamovi.org" class="external-link">https://www.jamovi.org</a>)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">combine_cols_omv</span><span class="op">(</span></span>
<span>  dtaInp <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fleOut <span class="op">=</span> <span class="st">""</span>,</span>
<span>  varPrs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  mdeCmb <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"none"</span>, <span class="st">"first"</span>, <span class="st">"second"</span><span class="op">)</span>,</span>
<span>  psvAnl <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  usePkg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"foreign"</span>, <span class="st">"haven"</span><span class="op">)</span>,</span>
<span>  selSet <span class="op">=</span> <span class="st">""</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dtainp">dtaInp<a class="anchor" aria-label="anchor" href="#arg-dtainp"></a></dt>
<dd><p>Either a data frame or the name of a data file to be read (including the path,
if required; "FILENAME.ext"; default: NULL); files can be of any supported file
type, see Details below.</p></dd>


<dt id="arg-fleout">fleOut<a class="anchor" aria-label="anchor" href="#arg-fleout"></a></dt>
<dd><p>Name of the data file to be written (including the path, if required;
"FILE_OUT.omv"; default: ""); if empty, the resulting data frame is returned
instead.</p></dd>


<dt id="arg-varprs">varPrs<a class="anchor" aria-label="anchor" href="#arg-varprs"></a></dt>
<dd><p>Definition of variable pairs; a list containing either list(s) or character
vector(s) with the names of pairs of variables to be combined (default: list()).</p></dd>


<dt id="arg-mdecmb">mdeCmb<a class="anchor" aria-label="anchor" href="#arg-mdecmb"></a></dt>
<dd><p>Mode of combining the variables when conflicting values occur, either "none",
"first", or "second" (default: "none"), see Details below.</p></dd>


<dt id="arg-psvanl">psvAnl<a class="anchor" aria-label="anchor" href="#arg-psvanl"></a></dt>
<dd><p>Whether analyses that are contained in the input file shall be transferred to the
output file (TRUE / FALSE; default: FALSE)</p></dd>


<dt id="arg-usepkg">usePkg<a class="anchor" aria-label="anchor" href="#arg-usepkg"></a></dt>
<dd><p>Name of the package: "foreign" or "haven" that shall be used to read SPSS, Stata,
and SAS files; "foreign" is the default (it comes with base R), but "haven" is
newer and more comprehensive.</p></dd>


<dt id="arg-selset">selSet<a class="anchor" aria-label="anchor" href="#arg-selset"></a></dt>
<dd><p>Name of the data set that is to be selected from the workspace (only applies when
reading .RData-files)</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed on to methods; see Details below.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a data frame containing the column pairs given in <code>varPrs</code> combined and the original
columns removed</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<ul><li><p>The need to combine two columns into one is quite common after merging columns or rows (using,
e.g., merge_cols_omv or merge_rows_omv). <code>varPrs</code> defines the variable pairs to be combined.
It is a list containing the pairs of variables to be combined, either as list or as character
vector; e.g., list(c("A", "B"), c("C", "D")) or list(list("A", "B"), list("C", "D")). <code>mdeCmb</code>
defines what to to if values in the first and the second variable of a variable pair contain
conflicting / different values: "none" does not merge the variables (and instead throws an
error), "first" makes that the values from the first variable of each pair are taken if the
values are conflicting, and "second" use the values from the second variable of each pair in
case of conflicts.</p></li>
<li><p>The ellipsis-parameter (<code>...</code>) can be used to submit arguments / parameters to the functions
that are used for reading and writing the data. By clicking on the respective function under
“See also”, you can get a more detailed overview over which parameters each of those functions
take. The functions are: <code>read_omv</code> and <code>write_omv</code> (for jamovi-files), <code>read.table</code> (for CSV
/ TSV files; using similar defaults as <code>read.csv</code> for CSV and <code>read.delim</code> for TSV which both
are based upon <code>read.table</code>), <code>load</code> (for .RData-files), <code>readRDS</code> (for .rds-files),
<code>read_sav</code> (needs the R-package <code>haven</code>) or <code>read.spss</code> (needs the R-package <code>foreign</code>) for
SPSS-files, <code>read_dta</code> (<code>haven</code>) / <code>read.dta</code> (<code>foreign</code>) for Stata-files, <code>read_sas</code>
(<code>haven</code>) for SAS-data-files, and <code>read_xpt</code> (<code>haven</code>) / <code>read.xport</code> (<code>foreign</code>) for
SAS-transport-files. If you would like to use <code>haven</code>, you may need to install it using
<code>install.packages("haven", dep = TRUE)</code>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code>combine_cols_omv</code> uses the following functions for reading and writing data files in
different formats: <code><a href="read_omv.html">read_omv()</a></code> and <code><a href="write_omv.html">write_omv()</a></code> for
jamovi-files, <code><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">utils::read.table()</a></code> for CSV / TSV files, <code><a href="https://rdrr.io/r/base/load.html" class="external-link">load()</a></code> for reading .RData-files,
<code><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS()</a></code> for .rds-files, <code><a href="https://haven.tidyverse.org/reference/read_spss.html" class="external-link">haven::read_sav()</a></code> or <code><a href="https://rdrr.io/pkg/foreign/man/read.spss.html" class="external-link">foreign::read.spss()</a></code> for SPSS-files,
<code><a href="https://haven.tidyverse.org/reference/read_dta.html" class="external-link">haven::read_dta()</a></code> or <code><a href="https://rdrr.io/pkg/foreign/man/read.dta.html" class="external-link">foreign::read.dta()</a></code> for Stata-files, <code><a href="https://haven.tidyverse.org/reference/read_sas.html" class="external-link">haven::read_sas()</a></code> for
SAS-data-files, and <code><a href="https://haven.tidyverse.org/reference/read_xpt.html" class="external-link">haven::read_xpt()</a></code> or <code><a href="https://rdrr.io/pkg/foreign/man/read.xport.html" class="external-link">foreign::read.xport()</a></code> for SAS-transport-files.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">dtaInp</span> <span class="op">&lt;-</span> <span class="fu">jmvReadWrite</span><span class="fu">::</span><span class="va"><a href="bfi_sample2.html">bfi_sample2</a></span></span></span>
<span class="r-in"><span><span class="co"># create a new column (A1_1) containing a subset of the values in the original variable</span></span></span>
<span class="r-in"><span><span class="co"># whereas those lines are replaced with NAs</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">selRow</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">dtaInp</span><span class="op">)</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">0</span></span></span>
<span class="r-in"><span><span class="va">dtaInp</span><span class="op">[</span><span class="va">selRow</span>,  <span class="st">"A1_1"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">dtaInp</span><span class="op">[</span><span class="va">selRow</span>, <span class="st">"A1"</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">dtaInp</span><span class="op">[</span><span class="va">selRow</span>,  <span class="st">"A1"</span><span class="op">]</span>   <span class="op">&lt;-</span> <span class="cn">NA</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dtaInp</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A1"</span>, <span class="st">"A1_1"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dtaOut</span> <span class="op">&lt;-</span> <span class="fu">combine_cols_omv</span><span class="op">(</span><span class="va">dtaInp</span>, varPrs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A1"</span>, <span class="st">"A1_1"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># show the differences before and after combining the values in the columns and ensure</span></span></span>
<span class="r-in"><span><span class="co"># that all values are the same as in the original data set</span></span></span>
<span class="r-in"><span><span class="va">dtaInp</span><span class="op">[</span>, <span class="st">"A1"</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">dtaOut</span><span class="op">[</span>, <span class="st">"A1"</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="va">dtaOut</span><span class="op">[</span>, <span class="st">"A1"</span><span class="op">]</span> <span class="op">==</span> <span class="fu">jmvReadWrite</span><span class="fu">::</span><span class="va"><a href="bfi_sample2.html">bfi_sample2</a></span><span class="op">[</span>, <span class="st">"A1"</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create a new column, containing values that are different from the original variable</span></span></span>
<span class="r-in"><span><span class="va">dtaInp</span> <span class="op">&lt;-</span> <span class="fu">jmvReadWrite</span><span class="fu">::</span><span class="va"><a href="bfi_sample2.html">bfi_sample2</a></span></span></span>
<span class="r-in"><span><span class="va">dtaInp</span><span class="op">[</span><span class="va">selRow</span>,  <span class="st">"A1_1"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">dtaInp</span><span class="op">[</span><span class="va">selRow</span>,  <span class="st">"A1"</span><span class="op">]</span> <span class="op">+</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="co"># [1] if mdeCmb is "none" (or if mdeCmb is not given - "none" is the default) an error would be</span></span></span>
<span class="r-in"><span><span class="co"># thrown (therefore the next line is commented out)</span></span></span>
<span class="r-in"><span><span class="co"># dtaOut &lt;- combine_cols_omv(dtaInp, varPrs = list(c("A1", "A1_1")), mdeCmb = "none")</span></span></span>
<span class="r-in"><span><span class="co"># [2] if mdeCmb is "first", missing values are replaced and values from the first column ("A1")</span></span></span>
<span class="r-in"><span><span class="co"># take precedence if the values are unequal</span></span></span>
<span class="r-in"><span><span class="va">dtaOut</span> <span class="op">&lt;-</span> <span class="fu">combine_cols_omv</span><span class="op">(</span><span class="va">dtaInp</span>, varPrs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A1"</span>, <span class="st">"A1_1"</span><span class="op">)</span><span class="op">)</span>, mdeCmb <span class="op">=</span> <span class="st">"first"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">dtaOut</span><span class="op">[</span>, <span class="st">"A1"</span><span class="op">]</span>, <span class="va">dtaInp</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A1"</span>, <span class="st">"A1_1"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># [3] if mdeCmb is "second", missing values are replaced and values from the second column</span></span></span>
<span class="r-in"><span><span class="co"># ("A1_1") take precedence if the values are unequal</span></span></span>
<span class="r-in"><span><span class="va">dtaOut</span> <span class="op">&lt;-</span> <span class="fu">combine_cols_omv</span><span class="op">(</span><span class="va">dtaInp</span>, varPrs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A1"</span>, <span class="st">"A1_1"</span><span class="op">)</span><span class="op">)</span>, mdeCmb <span class="op">=</span> <span class="st">"second"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">dtaOut</span><span class="op">[</span>, <span class="st">"A1"</span><span class="op">]</span>, <span class="va">dtaInp</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A1"</span>, <span class="st">"A1_1"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sebastian Jentschke.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

